---
title: 验证文档规范
linkTitle: 验证文档规范
weight: 1
draft: true
---

{{% pageinfo %}}
本规范规定了“万众一芯”验证文档的必要形式和结构（不是验证报告的模板），已发布和将来将要发布的文档都需要遵循这一规范。
{{% pageinfo %}}

# 万众一芯验证文档格式规范

验证文档标题请用一号标题格式（一个#），以加法器验证文档为例，其标题可以为：进位加法器设计与验证。

## 文档概述

**【必选项】** 在该部分对整个文档进行简约描述，例如内容概述，待验证模块的基本功能、特殊需求、特定规格、目标读者、知识前置等。目的是通过对该部分，读者便了解是否具有其感兴趣的内容。例如本文档是对验证文档的编写要求进行描述，便于多文档协作，规范验证的数据输入，特定数据标签等。

## 术语说明

**【必选项】** 该部分需要列出术语和关键概念解释，方便读者参考。
1. 优先解释模块专有缩写（如TLB， FIFO等）
2. 对容易混淆的概念请务必明确（如虚拟地址和物理地址等）
3. 示例格式如下：

| 缩写	| 全称 | 定义 |
| -- | ----- | ---|
| TLB	| Translation Lookaside Buffer	| 地址转换的缓存单元，用于加速虚拟地址到物理的转换 |
| FIFO	| First In First Out	| 先进先出队列 |
| QoS	| Quality of Service | 服务质量，用于总线仲裁中优先级控制机制 |

如果有其他补充情况请在此说明，例如：上述命名描述仅针对香山处理器，不代表RISC-V标准或者其他处理器。

## 整体框图

**【可选项】** 该部分可选章节，若模块含多个子模块或复杂数据流，需提供框图辅助说明。

基本要求：
1. 图必须清晰，最好为矢量图，可使用Visio/Draw.io等工具绘制，导出为PNG/SVG格式；
2. 图中需标注关键信号流向；
3. 框图中子模块命名需与“子模块列表”章节严格一致。
4. 需要图题目，位置居中

<p align="center">【图】</p>
<p align="center">示例整体框图</p>

## 流水级示意图

**【可选项】** 若为流水线型模块，需说明各级流水功能与时序关系。*

**编写要求**：
1. 可使用Visio/Draw.io等工具绘制，导出为PNG/SVG格式；
2. 涉及到的模块名称需要保持一致性
3. 重要数据除了列出名称以外，还需要标明位宽等信息

## 子模块列表

\[可选项\]*若模块由多个子模块组成，需在此列出*

以下是IFU top文档中的一个示例：

| 子模块                      | 描述                   |
| --------------------------- | ---------------------- |
| [PreDecoder](01_predecode.md) | 预译码模块             |
| [F3Predecoder](02_f3predecoder.md) | F3阶段预译码模块             |
| [RVCExpander](03_ifu_rvc_exp.md) | RVC指令扩展模块             |
| [PredChecker](04_pred_checker.md) | 预检查模块             |
| [FrontendTrigger](05_frontend_trigger.md) | 前端断点模块             |


## 模块功能说明

\[必填项\] *需按功能树形式逐级分解，每个功能点需对应后续测试点。*


**编写规则：**

1. 请用<mrs-functions></functions>包裹整个“模块功能说明”部分。
2. 采用X.Y.Z多级编号（如1.2.3表示主功能1→子功能2→测试点3，也可以继续细分）
3. 功能描述需明确输入条件、处理过程、输出结果

具体来说，可以按照如下的格式写作：

<mrs-functions>

## 模块功能说明

该章节需要对待验证模板的所有功能进行描述，并且每个功能点

### 1. 功能A说明
针对功能A分解测试点

如果测试点较多可以先列一个小表格

### 2. 功能B说明

针对功能B分解测试点

如果测试点较多可以先列一个小表格

### 3. 功能C说明

针对功能C分解测试点

如果测试点较多可以先列一个小表格；针对每个测试点，给出设置cov_group的建议

</mrs-functions>


## 常量说明

\[可选项\] *需列出模块中所有可配置参数及其物理意义*

**示例：**

| 常量名 | 常量值 | 解释 |
| ---- | ---- | ---- |
| ADDR_WIDTH | 64 | 地址总线位宽 |
| FIFO_DEPTH | 8 | 深度配置 |

## 接口说明
\[必填项\] *详细解释各种接口的含义、来源*

**编写规则**

1. 信号按功能（如时钟复位、数据输入、控制信号等）或来源（其他模块）分组；
2. 可以将一些同质的信号一起解释；
3. 特殊协议信号需注明时序要求（如AXI的VALID/READY握手）。

## 接口时序

*\[可选项\] 对复杂接口，提供波形图的案例*

示例可参考IFU top文档的[时序说明](./01_frontend/01_ifu/_index.md#接口时序)。

## 测试点总表

\[必填项\] *针对细分的测试点，列出表格*

**表格规范**：
1. 请用`<mrs-testpoints></mrs-testpoints>`标签包裹测试点总表，方便我们后续使用脚本提取测试点
2. 表格共列四项，序号，功能名称，测试点名称和解释
    1. **序号**：测试点的序号格式和功能点类似。即，即测试点1.2.3.4 可能是功能点1.2.3的第4个测试点
    2. **功能名称**：用英文大写命名，可用下划线分割单词，可以使用markdown语法为功能名称添加到具体功能点解释的链接，即形如`[文本](跳转目标)`
    3. **测试点名称**：用英文大写命名，可用下划线分割单词
    4. **解释**：简单描述测试点所需的输入和输出需求，明确判断条件

**表格示例**：

以下是节选自IFU top文档的一个例子

<mrs-testpoints>

| 序号 |  功能名称 | 测试点名称      | 描述                  |
| ----- |-----------------|---------------------|------------------------------------|
| 1\.1 | [IFU_RCV_REQ](#1-接收ftq取指令请求f0流水级) | READY | IFU接收FTQ请求后，设置ready |
| 2\.1\.1| [IFU_F1_INFOS](#21-f1流水级计算信息和切分指针) | PC | IFU接收FTQ请求后，在F1流水级生成PC         |
| 2\.1\.2| IFU_F1_INFOS | CUT_PTR | IFU接收FTQ请求后，在F1流水级生成后续切取缓存行的指针 |
| 2\.2\.1 | [IFU_F2_INFOS](#22-f2流水级获取指令信息) |  EXCP_VEC | IFU接收ICache内容后，会根据ICache的结果生成属于每个指令的异常向量  |

</mrs-testpoints>

